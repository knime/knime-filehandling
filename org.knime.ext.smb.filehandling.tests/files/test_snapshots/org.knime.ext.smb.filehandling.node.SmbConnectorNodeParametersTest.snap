{
  "data" : {
    "model" : {
      "connectionMode" : "FILESERVER",
      "fileserverHost" : "",
      "fileserverPort" : 445,
      "fileserverShare" : "",
      "domainName" : "",
      "domainNamespace" : "",
      "authentication" : {
        "type" : "USERNAME_PASSWORD",
        "userPasswordAuth" : {
          "credentials" : {
            "isHiddenPassword" : false,
            "isHiddenSecondFactor" : false,
            "username" : ""
          }
        }
      },
      "workingDirectory" : "\\",
      "timeout" : 30,
      "smbVersion" : "V_2_X",
      "useEncryption" : false
    }
  },
  "schema" : {
    "type" : "object",
    "properties" : {
      "model" : {
        "type" : "object",
        "properties" : {
          "authentication" : {
            "type" : "object",
            "properties" : {
              "type" : {
                "oneOf" : [ {
                  "const" : "USERNAME_PASSWORD",
                  "title" : "Username & password"
                }, {
                  "const" : "KERBEROS",
                  "title" : "Kerberos"
                }, {
                  "const" : "GUEST",
                  "title" : "Guest"
                }, {
                  "const" : "ANONYMOUS",
                  "title" : "Anonymous"
                } ],
                "title" : "Authentication method",
                "description" : "Specify the authentication method to use.\n<ul>\n<li><b>Username &amp; password</b>: Authenticate with a username and password (NTLM). Values entered here will be stored (weakly\nencrypted) with the workflow. The username field also accepts usernames of the form DOMAIN\\user\nand user@DOMAIN.</li>\n<li><b>Kerberos</b>: Authenticate using an existing Kerberos ticket.</li>\n<li><b>Guest</b>: Authenticate as the Guest user (without password).</li>\n<li><b>Anonymous</b>: Authenticate with an empty username (without password).</li>\n</ul>",
                "default" : "USERNAME_PASSWORD"
              },
              "userPasswordAuth" : {
                "type" : "object",
                "properties" : {
                  "credentials" : {
                    "type" : "object",
                    "properties" : {
                      "password" : {
                        "type" : "string",
                        "default" : ""
                      },
                      "secondFactor" : {
                        "type" : "string",
                        "default" : ""
                      },
                      "username" : {
                        "type" : "string",
                        "default" : ""
                      }
                    },
                    "default" : {
                      "isHiddenPassword" : false,
                      "isHiddenSecondFactor" : false,
                      "username" : ""
                    }
                  },
                  "flowVarName" : {
                    "type" : "string"
                  }
                },
                "title" : "Username & Password",
                "description" : "Credentials for username and password authentication.",
                "default" : {
                  "credentials" : {
                    "isHiddenPassword" : false,
                    "isHiddenSecondFactor" : false,
                    "username" : ""
                  }
                }
              }
            },
            "default" : {
              "type" : "USERNAME_PASSWORD",
              "userPasswordAuth" : {
                "credentials" : {
                  "isHiddenPassword" : false,
                  "isHiddenSecondFactor" : false,
                  "username" : ""
                }
              }
            }
          },
          "connectionMode" : {
            "oneOf" : [ {
              "const" : "FILESERVER",
              "title" : "File server"
            }, {
              "const" : "DOMAIN",
              "title" : "Domain"
            } ],
            "title" : "Connect to",
            "description" : "Specifies whether to connect by specifying a file server host or a Windows domain.\n<ul>\n<li><b>File server</b>: Connect directly to a file share on a specific file server. A file server is any machine that runs\nan SMB service, such as Windows Server or Samba. For example, this is similar to connecting to\n\\\\server.company.com\\marketing using Windows Explorer.</li>\n<li><b>Domain</b>: Connect to a file share in a Windows Active Directory domain. For example, this is similar to\nconnecting to \\\\company.com\\marketing using Windows Explorer, which first locates and then\nconnects to an SMB service that provides the file share or DFS namespace for the domain.</li>\n</ul>",
            "default" : "FILESERVER"
          },
          "domainName" : {
            "type" : "string",
            "title" : "Domain",
            "description" : "The name of the Windows domain (Active Directory), e.g. company.com.",
            "default" : ""
          },
          "domainNamespace" : {
            "type" : "string",
            "title" : "Share/Namespace",
            "description" : "The name of the file share or DFS namespace to access. The name must not contain any backslashes.",
            "default" : ""
          },
          "fileserverHost" : {
            "type" : "string",
            "title" : "Host",
            "description" : "Hostname of the server where the SMB service runs, e.g. server.company.com.",
            "default" : ""
          },
          "fileserverPort" : {
            "type" : "integer",
            "format" : "int32",
            "title" : "Port",
            "description" : "Port that the SMB server is listening on for incoming connections.",
            "default" : 445
          },
          "fileserverShare" : {
            "type" : "string",
            "title" : "Share",
            "description" : "The name of the file share provided by the SMB server. The name must not contain any backslashes.",
            "default" : ""
          },
          "smbVersion" : {
            "oneOf" : [ {
              "const" : "AUTO",
              "title" : "Auto"
            }, {
              "const" : "V_2_0_2",
              "title" : "2.0.2"
            }, {
              "const" : "V_2_1",
              "title" : "2.1"
            }, {
              "const" : "V_2_X",
              "title" : "2.x (2.1, 2.0.2)"
            }, {
              "const" : "V_3_0",
              "title" : "3.0"
            }, {
              "const" : "V_3_0_2",
              "title" : "3.0.2"
            }, {
              "const" : "V_3_1_1",
              "title" : "3.1.1"
            }, {
              "const" : "V_3_X",
              "title" : "3.x (3.1.1, 3.0.2, 3.0)"
            } ],
            "title" : "SMB version(s)",
            "description" : "Allows to enforce the usage of specific SMB protocol version(s). Selecting \"Auto\" will make the node\nchoose the highest version supported by both this node and the SMB server.\n<ul>\n<li><b>Auto</b>: Automatically choose the highest version supported by both parties.</li>\n<li><b>2.0.2</b>: Use SMB version 2.0.2.</li>\n<li><b>2.1</b>: Use SMB version 2.1.</li>\n<li><b>2.x (2.1, 2.0.2)</b>: Use the highest 2.x version supported by both parties.</li>\n<li><b>3.0</b>: Use SMB version 3.0.</li>\n<li><b>3.0.2</b>: Use SMB version 3.0.2.</li>\n<li><b>3.1.1</b>: Use SMB version 3.1.1.</li>\n<li><b>3.x (3.1.1, 3.0.2, 3.0)</b>: Use the highest 3.x version supported by both parties.</li>\n</ul>",
            "default" : "V_2_X"
          },
          "timeout" : {
            "type" : "integer",
            "format" : "int32",
            "title" : "Read/Write timeout (seconds)",
            "description" : "The timeout in seconds for read/write operations.",
            "default" : 30
          },
          "useEncryption" : {
            "type" : "boolean",
            "title" : "Use encryption",
            "description" : "If enabled, the node will use SMB Encryption that provides SMB data end-to-end encryption,\nif also supported by the SMB server. This option requires SMB version 3.x.",
            "default" : false
          },
          "workingDirectory" : {
            "type" : "string",
            "title" : "Working directory",
            "description" : "Specify the working directory of the resulting file system connection. The working directory must be\nspecified as an absolute path starting with a backslash. A working directory allows downstream nodes\nto access files/folders using relative paths, i.e. paths that do not have a leading backslash.\nThe default working directory is the root \"\\\".",
            "default" : "\\"
          }
        }
      }
    }
  },
  "ui_schema" : {
    "elements" : [ {
      "label" : "Connection",
      "type" : "Section",
      "elements" : [ {
        "type" : "Control",
        "scope" : "#/properties/model/properties/connectionMode",
        "options" : {
          "format" : "valueSwitch"
        }
      }, {
        "type" : "Control",
        "scope" : "#/properties/model/properties/fileserverHost",
        "options" : {
          "validation" : {
            "pattern" : {
              "errorMessage" : "The field cannot be blank (it must contain at least one non-whitespace character).",
              "parameters" : {
                "pattern" : ".*\\S.*"
              }
            }
          }
        },
        "rule" : {
          "effect" : "SHOW",
          "condition" : {
            "scope" : "#/properties/model/properties/connectionMode",
            "schema" : {
              "oneOf" : [ {
                "const" : "FILESERVER"
              } ]
            }
          }
        }
      }, {
        "type" : "Control",
        "scope" : "#/properties/model/properties/fileserverPort",
        "options" : {
          "validation" : {
            "max" : {
              "errorMessage" : "The value must not exceed 65535.",
              "parameters" : {
                "isExclusive" : false,
                "max" : 65535.0
              }
            },
            "min" : {
              "errorMessage" : "The value must be at least 1.",
              "parameters" : {
                "isExclusive" : false,
                "min" : 1.0
              }
            }
          }
        },
        "rule" : {
          "effect" : "SHOW",
          "condition" : {
            "scope" : "#/properties/model/properties/connectionMode",
            "schema" : {
              "oneOf" : [ {
                "const" : "FILESERVER"
              } ]
            }
          }
        }
      }, {
        "type" : "Control",
        "scope" : "#/properties/model/properties/fileserverShare",
        "rule" : {
          "effect" : "SHOW",
          "condition" : {
            "scope" : "#/properties/model/properties/connectionMode",
            "schema" : {
              "oneOf" : [ {
                "const" : "FILESERVER"
              } ]
            }
          }
        }
      }, {
        "type" : "Control",
        "scope" : "#/properties/model/properties/domainName",
        "options" : {
          "validation" : {
            "pattern" : {
              "errorMessage" : "The field cannot be blank (it must contain at least one non-whitespace character).",
              "parameters" : {
                "pattern" : ".*\\S.*"
              }
            }
          }
        },
        "rule" : {
          "effect" : "SHOW",
          "condition" : {
            "scope" : "#/properties/model/properties/connectionMode",
            "schema" : {
              "oneOf" : [ {
                "const" : "DOMAIN"
              } ]
            }
          }
        }
      }, {
        "type" : "Control",
        "scope" : "#/properties/model/properties/domainNamespace",
        "options" : {
          "validation" : {
            "pattern" : {
              "errorMessage" : "The field cannot be blank (it must contain at least one non-whitespace character).",
              "parameters" : {
                "pattern" : ".*\\S.*"
              }
            }
          }
        },
        "rule" : {
          "effect" : "SHOW",
          "condition" : {
            "scope" : "#/properties/model/properties/connectionMode",
            "schema" : {
              "oneOf" : [ {
                "const" : "DOMAIN"
              } ]
            }
          }
        }
      }, {
        "type" : "Control",
        "scope" : "#/properties/model/properties/smbVersion",
        "options" : {
          "isAdvanced" : true
        }
      }, {
        "type" : "Control",
        "scope" : "#/properties/model/properties/useEncryption",
        "options" : {
          "format" : "checkbox",
          "isAdvanced" : true
        }
      } ]
    }, {
      "label" : "Authentication",
      "type" : "Section",
      "elements" : [ {
        "type" : "Control",
        "scope" : "#/properties/model/properties/authentication/properties/type"
      }, {
        "type" : "Control",
        "scope" : "#/properties/model/properties/authentication/properties/userPasswordAuth",
        "options" : {
          "format" : "legacyCredentials"
        },
        "rule" : {
          "effect" : "SHOW",
          "condition" : {
            "scope" : "#/properties/model/properties/authentication/properties/type",
            "schema" : {
              "oneOf" : [ {
                "const" : "USERNAME_PASSWORD"
              } ]
            }
          }
        }
      } ]
    }, {
      "label" : "File System",
      "type" : "Section",
      "elements" : [ {
        "type" : "Control",
        "scope" : "#/properties/model/properties/workingDirectory",
        "options" : {
          "selectionMode" : "FOLDER",
          "format" : "stringFileChooser"
        },
        "providedOptions" : [ "fileSystemId" ]
      } ]
    }, {
      "label" : "Timeouts",
      "type" : "Section",
      "options" : {
        "isAdvanced" : true
      },
      "elements" : [ {
        "type" : "Control",
        "scope" : "#/properties/model/properties/timeout",
        "options" : {
          "validation" : {
            "max" : {
              "errorMessage" : "The value must not exceed 2147483647.",
              "parameters" : {
                "isExclusive" : false,
                "max" : 2.147483647E9
              }
            },
            "min" : {
              "errorMessage" : "The value must be at least 0.",
              "parameters" : {
                "isExclusive" : false,
                "min" : 0.0
              }
            }
          }
        }
      } ]
    } ]
  },
  "persist" : {
    "type" : "object",
    "properties" : {
      "model" : {
        "type" : "object",
        "properties" : {
          "connectionMode" : {
            "configPaths" : [ [ "connectionMode" ] ]
          },
          "fileserverHost" : {
            "configKey" : "fileserver<dot>host"
          },
          "fileserverPort" : {
            "configKey" : "fileserver<dot>port"
          },
          "fileserverShare" : {
            "configKey" : "fileserver<dot>share"
          },
          "domainName" : {
            "configKey" : "domain<dot>name"
          },
          "domainNamespace" : {
            "configKey" : "domain<dot>namespace"
          },
          "authentication" : {
            "type" : "object",
            "properties" : {
              "type" : {
                "configPaths" : [ [ "type" ] ]
              },
              "userPasswordAuth" : {
                "type" : "object",
                "properties" : {
                  "credentials" : { },
                  "flowVarName" : {
                    "configPaths" : [ ]
                  }
                },
                "configKey" : "user_pwd_v2",
                "deprecatedConfigKeys" : [ {
                  "deprecated" : [ [ "user_pwd" ] ]
                } ]
              }
            },
            "configKey" : "auth"
          },
          "workingDirectory" : { },
          "timeout" : { },
          "smbVersion" : {
            "configPaths" : [ [ "smbVersion" ] ]
          },
          "useEncryption" : { }
        }
      }
    }
  },
  "globalUpdates" : [ {
    "trigger" : {
      "id" : "after-open-dialog"
    },
    "triggerInitially" : true,
    "dependencies" : [ "#/properties/model/properties/authentication", "#/properties/model/properties/connectionMode", "#/properties/model/properties/domainName", "#/properties/model/properties/domainNamespace", "#/properties/model/properties/fileserverHost", "#/properties/model/properties/fileserverPort", "#/properties/model/properties/fileserverShare", "#/properties/model/properties/smbVersion", "#/properties/model/properties/timeout", "#/properties/model/properties/useEncryption", "#/properties/model/properties/workingDirectory" ]
  }, {
    "trigger" : {
      "scope" : "#/properties/model/properties/authentication"
    },
    "dependencies" : [ "#/properties/model/properties/authentication", "#/properties/model/properties/connectionMode", "#/properties/model/properties/domainName", "#/properties/model/properties/domainNamespace", "#/properties/model/properties/fileserverHost", "#/properties/model/properties/fileserverPort", "#/properties/model/properties/fileserverShare", "#/properties/model/properties/smbVersion", "#/properties/model/properties/timeout", "#/properties/model/properties/useEncryption", "#/properties/model/properties/workingDirectory" ]
  }, {
    "trigger" : {
      "scope" : "#/properties/model/properties/connectionMode"
    },
    "dependencies" : [ "#/properties/model/properties/authentication", "#/properties/model/properties/connectionMode", "#/properties/model/properties/domainName", "#/properties/model/properties/domainNamespace", "#/properties/model/properties/fileserverHost", "#/properties/model/properties/fileserverPort", "#/properties/model/properties/fileserverShare", "#/properties/model/properties/smbVersion", "#/properties/model/properties/timeout", "#/properties/model/properties/useEncryption", "#/properties/model/properties/workingDirectory" ]
  }, {
    "trigger" : {
      "scope" : "#/properties/model/properties/domainName"
    },
    "dependencies" : [ "#/properties/model/properties/authentication", "#/properties/model/properties/connectionMode", "#/properties/model/properties/domainName", "#/properties/model/properties/domainNamespace", "#/properties/model/properties/fileserverHost", "#/properties/model/properties/fileserverPort", "#/properties/model/properties/fileserverShare", "#/properties/model/properties/smbVersion", "#/properties/model/properties/timeout", "#/properties/model/properties/useEncryption", "#/properties/model/properties/workingDirectory" ]
  }, {
    "trigger" : {
      "scope" : "#/properties/model/properties/domainNamespace"
    },
    "dependencies" : [ "#/properties/model/properties/authentication", "#/properties/model/properties/connectionMode", "#/properties/model/properties/domainName", "#/properties/model/properties/domainNamespace", "#/properties/model/properties/fileserverHost", "#/properties/model/properties/fileserverPort", "#/properties/model/properties/fileserverShare", "#/properties/model/properties/smbVersion", "#/properties/model/properties/timeout", "#/properties/model/properties/useEncryption", "#/properties/model/properties/workingDirectory" ]
  }, {
    "trigger" : {
      "scope" : "#/properties/model/properties/fileserverHost"
    },
    "dependencies" : [ "#/properties/model/properties/authentication", "#/properties/model/properties/connectionMode", "#/properties/model/properties/domainName", "#/properties/model/properties/domainNamespace", "#/properties/model/properties/fileserverHost", "#/properties/model/properties/fileserverPort", "#/properties/model/properties/fileserverShare", "#/properties/model/properties/smbVersion", "#/properties/model/properties/timeout", "#/properties/model/properties/useEncryption", "#/properties/model/properties/workingDirectory" ]
  }, {
    "trigger" : {
      "scope" : "#/properties/model/properties/fileserverPort"
    },
    "dependencies" : [ "#/properties/model/properties/authentication", "#/properties/model/properties/connectionMode", "#/properties/model/properties/domainName", "#/properties/model/properties/domainNamespace", "#/properties/model/properties/fileserverHost", "#/properties/model/properties/fileserverPort", "#/properties/model/properties/fileserverShare", "#/properties/model/properties/smbVersion", "#/properties/model/properties/timeout", "#/properties/model/properties/useEncryption", "#/properties/model/properties/workingDirectory" ]
  }, {
    "trigger" : {
      "scope" : "#/properties/model/properties/fileserverShare"
    },
    "dependencies" : [ "#/properties/model/properties/authentication", "#/properties/model/properties/connectionMode", "#/properties/model/properties/domainName", "#/properties/model/properties/domainNamespace", "#/properties/model/properties/fileserverHost", "#/properties/model/properties/fileserverPort", "#/properties/model/properties/fileserverShare", "#/properties/model/properties/smbVersion", "#/properties/model/properties/timeout", "#/properties/model/properties/useEncryption", "#/properties/model/properties/workingDirectory" ]
  }, {
    "trigger" : {
      "scope" : "#/properties/model/properties/smbVersion"
    },
    "dependencies" : [ "#/properties/model/properties/authentication", "#/properties/model/properties/connectionMode", "#/properties/model/properties/domainName", "#/properties/model/properties/domainNamespace", "#/properties/model/properties/fileserverHost", "#/properties/model/properties/fileserverPort", "#/properties/model/properties/fileserverShare", "#/properties/model/properties/smbVersion", "#/properties/model/properties/timeout", "#/properties/model/properties/useEncryption", "#/properties/model/properties/workingDirectory" ]
  }, {
    "trigger" : {
      "scope" : "#/properties/model/properties/timeout"
    },
    "dependencies" : [ "#/properties/model/properties/authentication", "#/properties/model/properties/connectionMode", "#/properties/model/properties/domainName", "#/properties/model/properties/domainNamespace", "#/properties/model/properties/fileserverHost", "#/properties/model/properties/fileserverPort", "#/properties/model/properties/fileserverShare", "#/properties/model/properties/smbVersion", "#/properties/model/properties/timeout", "#/properties/model/properties/useEncryption", "#/properties/model/properties/workingDirectory" ]
  }, {
    "trigger" : {
      "scope" : "#/properties/model/properties/useEncryption"
    },
    "dependencies" : [ "#/properties/model/properties/authentication", "#/properties/model/properties/connectionMode", "#/properties/model/properties/domainName", "#/properties/model/properties/domainNamespace", "#/properties/model/properties/fileserverHost", "#/properties/model/properties/fileserverPort", "#/properties/model/properties/fileserverShare", "#/properties/model/properties/smbVersion", "#/properties/model/properties/timeout", "#/properties/model/properties/useEncryption", "#/properties/model/properties/workingDirectory" ]
  }, {
    "trigger" : {
      "scope" : "#/properties/model/properties/workingDirectory"
    },
    "dependencies" : [ "#/properties/model/properties/authentication", "#/properties/model/properties/connectionMode", "#/properties/model/properties/domainName", "#/properties/model/properties/domainNamespace", "#/properties/model/properties/fileserverHost", "#/properties/model/properties/fileserverPort", "#/properties/model/properties/fileserverShare", "#/properties/model/properties/smbVersion", "#/properties/model/properties/timeout", "#/properties/model/properties/useEncryption", "#/properties/model/properties/workingDirectory" ]
  } ]
}